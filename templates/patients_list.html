{% extends 'base.html' %}
{% block title %}Patients Â· DentalCare{% endblock %}
{% block content %}
<section class="hero"><div class="hero-bg"></div></section>
<div class="container">
  {% for m in get_flashed_messages(with_categories=true) %}
    <div class="flash {{ m[0] }}">{{ m[1] }}</div>
  {% endfor %}

  <div class="admin-hero" style="margin-bottom: 2rem;">
    <span class="badge">Management</span>
    <h1 class="strong" style="margin: 0;">Patients</h1>
  </div>

  <p><a class="btn btn-primary" href="/staff/patients/add">+ Add Patient</a></p>

  {% if patients %}
  <div style="max-height: 700px; overflow-y: auto;">
    <table class="table glass">
      <thead style="position: sticky; top: 0; z-index: 10;">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Age</th>
          <th>Sex</th>
          <th>Contact</th>
          <th>Address</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for p in patients %}
        <tr>
          <td><strong>{{ p.pat_id }}</strong></td>
          <td>{{ p.pat_name }}</td>
          <td>{{ p.pat_age }}</td>
          <td>{{ p.pat_sex }}</td>
          <td>{{ p.pat_contact }}</td>
          <td>{{ p.pat_address }}</td>
          <td>
            <div style="display: flex; gap: 0.5rem;">
              <a class="btn btn-primary" href="/staff/patients/{{ p.pat_id }}/edit" style="padding: 0.4rem 0.75rem; font-size: 0.8rem; text-decoration: none;">Edit</a>
              <form method="post" action="/staff/patients/{{ p.pat_id }}/delete" style="display: inline;" onsubmit="return confirm('Delete this patient?')">
                <button class="btn btn-danger" type="submit" style="padding: 0.4rem 0.75rem; font-size: 0.8rem;">Delete</button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div style="text-align: center; padding: 3rem; color: var(--muted);">
      <p style="font-size: 1.1rem; margin-bottom: 1rem;">ðŸ“­ No patients found</p>
      <p>Start by adding a new patient to the system.</p>
      <p><a href="/staff/patients/add" style="color: var(--primary); text-decoration: none; font-weight: 600;">Add first patient</a></p>
    </div>
  {% endif %}
</div>
{% endblock %}
